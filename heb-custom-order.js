(function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://cdn.jsdelivr.net/gh/oncomouse/heb-order-check@master/lodash.custom.min.js"),e.addEventListener("load",function(){var e="heb_order_check",t=null;try{t=document.querySelector(".order-details__order-number").innerText.replace("Order #","")}catch(e){alert("No HEB Order Detected!")}if(null!==t){var r=Array.from(document.querySelectorAll(".order-history-item")).map(function(e){return{name:e.querySelector(".order-history-item__name").innerText.split(/\n/)[0],quantity:parseInt(e.querySelector(".order-history-item__quantity").innerText.replace(/Qty: /,""),10)}}),o=JSON.parse(localStorage.getItem(e)),n=function(e,t){return null!==e&&Object.prototype.hasOwnProperty.call(e,t)}(o,t)?o[t]:JSON.parse(prompt("Please enter the saved JSON file or Click OK to continue.","[]")),l=_.differenceWith(r,n,_.isEqual),i=_.differenceWith(n,r,_.isEqual),a=document.createElement("DIV");a.style.position="absolute",a.style.padding="0.5%",a.style.left="15px",a.style.right="15px",a.style.top="15px",a.style.bottom="15px",a.style.backgroundColor="rgba(0,0,0,0.7)",a.style.color="white",a.style.zIndex=1e6,a.style.position="fixed",a.style.overflow="scroll";var c=function(e){return 0===e.length?["<li><em>Nothing Here</em></li>"]:e.map(function(e){return"<li><strong>"+e.quantity+"</strong> of <strong>"+e.name+"</strong></li>"})};a.innerHTML="<p>Here are the additions:</p><ul>"+c(l).join("")+"</ul><p>Here are the deletions:</p><ul>"+c(i).join("")+'</ul><p><button id="save">Save This Order?</button></p><p><button id="close">Close</button></p><p><button id="reset">Reset Stored Data</button></p>',document.getElementsByTagName("body")[0].appendChild(a),document.querySelector("#save").addEventListener("click",function(){var n,l;n=JSON.stringify(r),(l=document.createElement("textarea")).value=n,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l);var i={};i[t]=r,localStorage.setItem(e,JSON.stringify(null===o?i:Object.assign({},o,i))),alert("The new order state has been saved on this browser and copied to the clipboard, if you wish to save a local copy.")}),document.querySelector("#reset").addEventListener("click",function(){localStorage.setItem(e,null)}),document.querySelector("#close").addEventListener("click",function(){a.parentElement.removeChild(a)})}},!1),document.body.appendChild(e)})();
